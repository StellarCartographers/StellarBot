<?xml version="1.0" encoding="UTF-8"?>
<Configuration status="TRACE" monitorInterval="180">
    <Appenders>
        <TerminalConsole name="Console">
            <PatternLayout pattern="%highlightError{[%d{HH:mm:ss}] [%t/%level] [%logger]: %msg%n%xEx}" />
        </TerminalConsole>
    	<RollingRandomAccessFile name="File" fileName="logs/latest.log" filePattern="logs/${date:yyyy-MM}/latest-%d{MM-dd-yyyy}-%i.log.gz">
        	<PatternLayout pattern="[%d{HH:mm:ss}] [%t/%level] [%logger]: %msg%n" />
        	<Policies>
                <TimeBasedTriggeringPolicy/>
                <OnStartupTriggeringPolicy/>
        	</Policies>
    	</RollingRandomAccessFile>
        <RollingRandomAccessFile name="DebugFile" fileName="logs/debug.log" filePattern="logs/${date:yyyy-MM}/debug-%i.log.gz">
            <PatternLayout pattern="[%d{HH:mm:ss}] [%t/%level] [%logger]: %msg%n" />
            <Policies>
                <OnStartupTriggeringPolicy/>
                <SizeBasedTriggeringPolicy size="200MB"/>
            </Policies>
            <DefaultRolloverStrategy max="5" fileIndex="min"/>
        </RollingRandomAccessFile>
		<Gelf name="gelf" host="udp:graylog.readonlydev.network" port="9000" version="1.1" extractStackTrace="true" filterStackTrace="true" mdcProfiling="true" includeFullMdc="true" maximumMessageSize="8192" originHost="%host{fqdn}">
			<Field name="timestamp" pattern="%d{dd MMM yyyy HH:mm:ss,SSS}"/>
			<Field name="level" pattern="%level"/>
			<Field name="simpleClassName" pattern="%C{1}"/>
			<Field name="className" pattern="%C"/>
			<Field name="server" pattern="%host"/>
			<Field name="server.fqdn" pattern="%host{fqdn}"/>
			<Field name="logStream" literal="TSCG"/>
		</Gelf>
    </Appenders>
    <Loggers>
        <Root level="INFO" additivity="false" includeLocation="true">
            <AppenderRef ref="Console" level="info"/>
            <AppenderRef ref="File" level="trace"/>
            <AppenderRef ref="gelf"/>
        </Root>
    </Loggers>
</Configuration>